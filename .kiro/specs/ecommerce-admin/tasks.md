# 实现计划: 电商管理后台

## 概述

基于Vue3+Vite+TypeScript技术栈，采用Element Plus UI组件库和Pinia状态管理，构建现代化电商管理后台系统。实现包括项目搭建、核心功能开发、测试编写和集成联调。

## 任务

- [x] 1. 项目初始化和基础配置
  - 安装和配置Vue3、Vite、TypeScript、Element Plus、Pinia等核心依赖
  - 配置项目目录结构和开发环境
  - 设置代码规范和构建配置
  - _需求: 需求 10.2_

- [x] 2. HTTP服务层实现
  - [x] 2.1 创建Axios实例和基础配置
    - 实现axios实例创建，配置baseURL（开发环境为http://127.0.0.1:18500）、timeout等基础参数
    - _需求: 需求 2.1_

  - [x] 2.2 实现请求拦截器
    - 实现自动添加Authorization请求头的拦截器
    - _需求: 需求 2.2_

  - [ ]* 2.3 编写请求拦截器属性测试
    - **属性 4: HTTP请求认证头**
    - **验证需求: 需求 2.2**

  - [x] 2.4 实现响应拦截器
    - 实现自动令牌更新和Result对象解析的响应拦截器
    - _需求: 需求 2.3, 2.4_

  - [ ]* 2.5 编写响应拦截器属性测试
    - **属性 2: 自动令牌更新**
    - **属性 5: API响应数据解析**
    - **验证需求: 需求 2.3, 2.4**

  - [x] 2.6 封装HTTP方法
    - 实现getAction、postAction、putAction、deleteAction方法
    - _需求: 需求 2.1_

  - [ ]* 2.7 编写HTTP方法单元测试
    - 测试封装方法的存在性和基本功能
    - _需求: 需求 2.1_

- [x] 3. 状态管理实现
  - [x] 3.1 创建认证状态管理
    - 实现AuthStore，包含登录、登出、令牌管理等功能
    - _需求: 需求 1.1, 1.2, 1.3_

  - [ ]* 3.2 编写认证状态属性测试
    - **属性 1: 认证令牌管理**
    - **验证需求: 需求 1.1, 1.2, 1.3**

  - [x] 3.3 创建业务实体状态管理
    - 实现ProductStore、CategoryStore等业务实体的状态管理
    - _需求: 需求 3.1-3.5, 5.1-5.5_

  - [ ]* 3.4 编写业务状态属性测试
    - **属性 6: 实体CRUD操作一致性**
    - **属性 7: 分页查询一致性**
    - **属性 8: 搜索过滤准确性**
    - **验证需求: 需求 3.1-3.5, 5.1-5.5**

- [x] 4. 路由配置和认证守卫
  - [x] 4.1 配置Vue Router
    - 创建路由配置，定义页面路由结构
    - _需求: 需求 1.4_

  - [x] 4.2 实现认证路由守卫
    - 实现beforeEach守卫，处理认证重定向逻辑
    - _需求: 需求 1.4_

  - [ ]* 4.3 编写路由守卫属性测试
    - **属性 3: 认证重定向**
    - **验证需求: 需求 1.4**

- [x] 5. 检查点 - 核心基础设施验证
  - 确保所有测试通过，询问用户是否有问题

- [x] 6. 用户认证页面实现
  - [x] 6.1 创建登录页面组件
    - 实现登录表单UI，包含用户名密码输入和验证
    - _需求: 需求 1.1_

  - [x] 6.2 集成登录API调用
    - 连接登录表单与认证状态管理，实现登录流程
    - _需求: 需求 1.1, 1.2, 1.3_

  - [ ]* 6.3 编写登录页面单元测试
    - 测试登录表单渲染和交互
    - _需求: 需求 1.1_

- [x] 7. 主布局和导航实现
  - [x] 7.1 创建主布局组件
    - 实现包含头部、侧边栏、主内容区的布局结构
    - _需求: 需求 10.1, 10.3_

  - [x] 7.2 实现导航菜单
    - 创建侧边栏导航菜单，支持路由跳转
    - _需求: 需求 10.3_

  - [x] 7.3 实现主题切换功能
    - 添加深色/浅色主题切换功能
    - _需求: 需求 10.4_

  - [ ]* 7.4 编写主题切换属性测试
    - **属性 19: 主题切换状态保持**
    - **验证需求: 需求 10.4**

- [-] 8. 商品分类管理实现
  - [x] 8.1 创建分类列表页面
    - 实现分类列表展示，支持分页、搜索、排序
    - _需求: 需求 3.1, 3.5_

  - [x] 8.2 创建分类编辑对话框
    - 实现分类新增、编辑、删除功能
    - _需求: 需求 3.2, 3.3, 3.4_

  - [ ] 8.3 集成分类API服务
    - 连接分类页面与后端API，实现数据交互
    - _需求: 需求 3.1-3.5_

  - [ ]* 8.4 编写分类管理单元测试
    - 测试分类列表和编辑组件的基本功能
    - _需求: 需求 3.1-3.5_

- [ ] 9. 规格管理实现
  - [ ] 9.1 创建规格键管理页面
    - 实现规格键的列表展示和CRUD操作
    - _需求: 需求 4.1, 4.4, 4.5_

  - [ ] 9.2 创建规格值管理组件
    - 实现规格值的添加、编辑、删除，支持图片上传
    - _需求: 需求 4.2, 4.3_

  - [ ] 9.3 实现规格关联逻辑
    - 处理规格键与规格值的关联关系管理
    - _需求: 需求 4.2_

  - [ ]* 9.4 编写规格管理属性测试
    - **属性 9: 实体关联关系完整性**
    - **属性 10: 级联删除一致性**
    - **属性 17: 排序功能一致性**
    - **验证需求: 需求 4.1-4.5**

- [ ] 10. 检查点 - 基础管理功能验证
  - 确保所有测试通过，询问用户是否有问题

- [ ] 11. 商品基础管理实现
  - [ ] 11.1 创建商品列表页面
    - 实现商品列表展示，支持分页、搜索、筛选
    - _需求: 需求 5.4, 5.5_

  - [ ] 11.2 创建商品基本信息编辑
    - 实现商品基本信息的新增和编辑功能
    - _需求: 需求 5.1, 5.2, 5.3_

  - [ ] 11.3 集成商品API服务
    - 连接商品管理页面与后端API
    - _需求: 需求 5.1-5.5_

  - [ ]* 11.4 编写商品基础管理单元测试
    - 测试商品列表和基本编辑功能
    - _需求: 需求 5.1-5.5_

- [ ] 12. 商品附图管理实现
  - [ ] 12.1 创建图片上传组件
    - 实现多图片上传、预览、排序功能
    - _需求: 需求 6.1, 6.2, 6.3_

  - [ ] 12.2 实现图片管理逻辑
    - 处理图片与商品的关联、状态管理、删除等
    - _需求: 需求 6.1, 6.4, 6.5_

  - [ ]* 12.3 编写图片管理属性测试
    - **属性 16: 图片格式验证**
    - **属性 17: 排序功能一致性**
    - **验证需求: 需求 6.1-6.5**

- [ ] 13. SKU管理实现
  - [ ] 13.1 创建SKU列表组件
    - 实现SKU的列表展示和基本操作
    - _需求: 需求 7.1, 7.2, 7.5_

  - [ ] 13.2 实现SKU编辑功能
    - 创建SKU编辑表单，包含价格、库存、预警设置
    - _需求: 需求 7.2, 7.3_

  - [ ] 13.3 实现默认SKU管理
    - 处理默认SKU的唯一性约束逻辑
    - _需求: 需求 7.4_

  - [ ]* 13.4 编写SKU管理属性测试
    - **属性 11: SKU编码唯一性**
    - **属性 12: 默认SKU唯一性约束**
    - **属性 18: 库存预警逻辑**
    - **验证需求: 需求 7.1-7.5**

- [ ] 14. SKU规格关系管理实现
  - [ ] 14.1 创建规格选择组件
    - 实现SKU规格组合的选择界面
    - _需求: 需求 8.1, 8.2_

  - [ ] 14.2 实现规格关系管理
    - 处理SKU与规格的关联关系CRUD操作
    - _需求: 需求 8.1, 8.2, 8.3_

  - [ ] 14.3 实现规格组合验证
    - 验证规格组合的唯一性约束
    - _需求: 需求 8.4_

  - [ ]* 14.4 编写SKU规格关系属性测试
    - **属性 13: 规格组合唯一性验证**
    - **验证需求: 需求 8.1-8.4**

- [ ] 15. 综合商品添加页面实现
  - [ ] 15.1 创建分步骤表单框架
    - 实现分步骤表单的基础结构和导航
    - _需求: 需求 9.1_

  - [ ] 15.2 实现表单验证逻辑
    - 添加实时表单验证和错误提示
    - _需求: 需求 9.2_

  - [ ] 15.3 集成多图片上传步骤
    - 在商品添加流程中集成图片上传功能
    - _需求: 需求 9.3_

  - [ ] 15.4 实现SKU自动生成
    - 根据选择的规格自动生成SKU组合
    - _需求: 需求 9.4_

  - [ ] 15.5 实现原子性保存
    - 确保商品及相关数据的原子性保存
    - _需求: 需求 9.5_

  - [ ]* 15.6 编写综合添加页面属性测试
    - **属性 14: 表单验证实时性**
    - **属性 15: 原子性数据保存**
    - **验证需求: 需求 9.1-9.5**

- [ ] 16. 错误处理和用户体验优化
  - [ ] 16.1 实现全局错误处理
    - 添加网络错误、认证错误的统一处理机制
    - _需求: 错误处理需求_

  - [ ] 16.2 优化加载状态和用户反馈
    - 添加加载指示器、操作反馈等用户体验优化
    - _需求: 需求 10.3_

  - [ ]* 16.3 编写错误处理单元测试
    - 测试各种错误场景的处理逻辑
    - _需求: 错误处理需求_

- [ ] 17. 最终检查点 - 系统集成测试
  - 确保所有测试通过，询问用户是否有问题

- [ ] 18. 构建优化和部署准备
  - [ ] 18.1 优化构建配置
    - 配置生产环境构建优化，包含代码分割、压缩等
    - _需求: 需求 10.1_

  - [ ] 18.2 添加环境配置
    - 配置开发、测试、生产环境的不同参数
    - _需求: 系统配置需求_

  - [ ]* 18.3 编写构建和部署文档
    - 创建项目构建和部署说明文档
    - _需求: 文档需求_

## 注意事项

- 标记为 `*` 的任务是可选的，可以跳过以实现更快的MVP
- 每个任务都引用了具体的需求以确保可追溯性
- 检查点确保增量验证和用户反馈
- 属性测试验证通用正确性属性
- 单元测试验证特定示例和边界情况